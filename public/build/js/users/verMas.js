document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".ver-mas"),t=document.getElementById("usuarioModal"),o=document.querySelector(".close-modal"),n=document.querySelector(".modal-btn.cerrar");function d(){t.classList.remove("show"),document.body.style.overflow="auto"}e.forEach((e=>{e.addEventListener("click",(function(){!function(e){const o=document.querySelector(`.section-usuarios[data-id="${e}"]`);if(o){const e=o.querySelector(".nombre-usuarios:nth-of-type(1)").textContent,n=o.querySelector(".nombre-usuarios:nth-of-type(2)").textContent,d=o.querySelector(".correo-usuarios").textContent,a=o.querySelector(".perfil-usuarios").src,s=o.closest(".section-usuarios"),c=s.dataset.telefono||"No especificado",i="1"===s.dataset.estado?"Activo":"Inactivo",l="1"===s.dataset.admin?"Administrador":"Usuario normal",m=JSON.parse(s.dataset.divisiones||"[]"),r=s.dataset.id;document.getElementById("modalNombreCompleto").textContent=`${e} ${n}`,document.getElementById("modalEmail").textContent=d,document.getElementById("modalTelefono").textContent=c,document.getElementById("modalEstado").textContent=i,document.getElementById("modalRol").textContent=l,document.getElementById("modalId").textContent=r,document.getElementById("modalProfilePhoto").src=a;const u=document.getElementById("modalAdminBadge"),y=document.getElementById("modalEstadoBadge");u.textContent="Administrador"===l?"Admin":"Usuario",u.className="badge "+("Administrador"===l?"admin":"normal"),y.textContent=i,y.className="badge "+("Activo"===i?"activo":"inactivo");const E=document.getElementById("modalDivisiones");if(E.innerHTML="",m.length>0)m.forEach((e=>{const t=document.createElement("li");t.textContent=e.nombre,E.appendChild(t)}));else{const e=document.createElement("li");e.textContent="Sin divisiones asignadas",e.style.color="#999",e.style.fontStyle="italic",E.appendChild(e)}t.classList.add("show"),document.body.style.overflow="hidden"}}(this.getAttribute("data-id"))}))})),o.addEventListener("click",d),n.addEventListener("click",d),t.addEventListener("click",(function(e){e.target===t&&d()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&t.classList.contains("show")&&d()}))}));